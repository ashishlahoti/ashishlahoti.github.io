<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Custom API Request &amp; Response Logging in spring boot. - Coding N Concepts</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Custom API Request &amp; Response Logging in spring boot.">
	<meta property="og:title" content="Custom API Request &amp; Response Logging in spring boot." />
<meta property="og:description" content="Custom API Request &amp; Response Logging in spring boot." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codingnconcepts.com/spring-boot/custom-api-request-response-logging/" />
<meta property="article:published_time" content="2020-04-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-04-23T00:00:00+00:00" />
<meta property="og:site_name" content="CodingNConcepts" />

<meta property="article:author" content="https://www.facebook.com/codingnconcepts" />
<meta property="article:publisher" content="https://www.facebook.com/codingnconcepts" />
<meta property="article:section" content="spring-boot" />
<meta property="article:tag" content="Spring Boot" />
<meta property="article:tag" content="Microservice" />
<meta property="fb:admins" content="177784346770196" />
	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Custom API Request &amp; Response Logging in spring boot."/>
<meta name="twitter:description" content="Custom API Request &amp; Response Logging in spring boot."/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="canonical" href="https://codingnconcepts.com/spring-boot/custom-api-request-response-logging/">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-160024498-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	


<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "spring-boot",
    "name": "Custom API Request \x26 Response Logging in spring boot.",
    "headline": "Custom API Request \x26 Response Logging in spring boot.",
    "alternativeHeadline": "",
    "description": "Custom API Request \x26 Response Logging in spring boot.",
    "inLanguage": "en-us",
	"isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/codingnconcepts.com\/spring-boot\/custom-api-request-response-logging\/"
    },
    "author" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "creator" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "Ashish Lahoti"
    },
    "copyrightHolder" : "Coding N Concepts",
    "copyrightYear" : "2020",
    "dateCreated": "2020-04-23T00:00:00.00Z",
    "datePublished": "2020-04-23T00:00:00.00Z",
    "dateModified": "2020-04-23T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "Coding N Concepts",
        "url": "https://codingnconcepts.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/codingnconcepts.com\/favicon-32x32.png",
            "width":"32",
            "height":"32"
        }
    },
    "image": "https://codingnconcepts.com/favicon-32x32.png",
    "url" : "https:\/\/codingnconcepts.com\/spring-boot\/custom-api-request-response-logging\/",
    "wordCount" : "1501",
    "genre" : [ "Spring Boot" , "Microservice" ],
    "keywords" : [ ]
}
</script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Coding N Concepts" rel="home">
				<div class="logo__title"><img src="/favicon-32x32.png" alt="Custom API Request &amp; Response Logging in spring boot."> Coding N Concepts</div>
				<div class="logo__tagline">Ashish Lahoti&#39;s Technical Blog</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/java/">
				
				<span class="menu__text">Java</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/javascript/">
				
				<span class="menu__text">JavaScript</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/spring-boot/">
				
				<span class="menu__text">Spring Boot</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/interview-questions/">
				
				<span class="menu__text">Interview Questions</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/categories/kafka/">
				
				<span class="menu__text">Kafka</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/puzzle/">
				
				<span class="menu__text">Puzzles</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/tools/">
				
				<span class="menu__text">Tools</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About Me</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title"><img class="post__thumbnail" src="/img/logo/springboot.png" alt="Custom API Request &amp; Response Logging in spring boot."> Custom API Request &amp; Response Logging in spring boot.</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2020-04-23T00:00:00Z">April 23, 2020</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="/categories/spring-boot/" rel="category">Spring Boot</a>
	</span>
</div></div>
		</header><div class="content post__content clearfix">
			<p>When we create RESTFul APIs in spring boot application in microservices environment. It becomes essential to log incoming API request and response and push it to centralized logging system such as Splunk or ELK for debugging. Also all the logs related to one request should have some common id to relate them. In this post we are going to solve these problems.</p>
<h3 id="1-create-restful-api">1. Create RESTFul API</h3>
<p>Let&rsquo;s create a RestController to expose RESTFul API</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#555;font-weight:bold">@RestController</span>
<span style="color:#555;font-weight:bold">@RequestMapping</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;/posts&#34;</span><span style="color:#333">)</span>
<span style="color:#080;font-weight:bold">public</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">PostController</span> <span style="color:#333">{</span>

	<span style="color:#555;font-weight:bold">@GetMapping</span>
	<span style="color:#080;font-weight:bold">public</span> List<span style="color:#333">&lt;</span>Post<span style="color:#333">&gt;</span> <span style="color:#06b;font-weight:bold">getAllPosts</span><span style="color:#333">()</span> <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">return</span> Arrays<span style="color:#333">.</span><span style="color:#00c">asList</span><span style="color:#333">(</span><span style="color:#080;font-weight:bold">new</span> Post<span style="color:#333">[]</span> <span style="color:#333">{</span>
		     <span style="color:#080;font-weight:bold">new</span> Post<span style="color:#333">[]</span> <span style="color:#333">{</span> <span style="color:#080;font-weight:bold">new</span> Post<span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;spring&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;Spring Boot&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;All about Spring boot microservice&#34;</span><span style="color:#333">),</span>
				 <span style="color:#080;font-weight:bold">new</span> Post<span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;java&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;Java&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;Learn Streams in Java&#34;</span><span style="color:#333">),</span>
				 <span style="color:#080;font-weight:bold">new</span> Post<span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;javascript&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;JavaScript&#34;</span><span style="color:#333">,</span> <span style="background-color:#fff0f0">&#34;Whats new in ES6&#34;</span><span style="color:#333">)</span>	     
		<span style="color:#333">});</span>
	<span style="color:#333">}</span>
<span style="color:#333">}</span>
</code></pre></div><figure class="center">
    <img src="/img/spring-boot/api-logging-1.png"/> 
</figure>

<p><br /></p>
<h3 id="2-create-api-logger">2. Create API Logger</h3>
<p>At this point we have exposed API but we haven&rsquo;t logged it yet. Let&rsquo;s create an API logger which is having following configurable properties:-</p>
<ul>
<li><strong>app.api.logging.enable</strong> If true then api logger will be enabled and log all api request and response</li>
<li><strong>app.api.logging.url-patterns</strong> If provided in a comma separated url patterns, only those api request and response will be logged. default value is <strong>'*'</strong> means all api request and response will be printed</li>
<li><strong>app.api.logging.requestIdParamName</strong> If provided request parameter in incoming api request will be logged across all logs to serve that request. default value is <em><strong>requestId</strong></em>. If not provided, new request id (uuid) will be generated to log across all logs.</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.beans.factory.annotation.Value</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.boot.autoconfigure.condition.ConditionalOnExpression</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.boot.web.servlet.FilterRegistrationBean</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.context.annotation.Bean</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.stereotype.Component</span><span style="color:#333">;</span>

<span style="color:#555;font-weight:bold">@Component</span>
<span style="display:block;width:100%;background-color:#e5e5e5"><span style="color:#555;font-weight:bold">@ConditionalOnExpression</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;${app.api.logging.enable:true}&#34;</span><span style="color:#333">)</span>
</span><span style="color:#080;font-weight:bold">public</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">ApiLoggingFilterConfig</span> <span style="color:#333">{</span>

<span style="display:block;width:100%;background-color:#e5e5e5">	<span style="color:#555;font-weight:bold">@Value</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;${app.api.logging.url-patterns:*}&#34;</span><span style="color:#333">)</span>
</span>	<span style="color:#080;font-weight:bold">private</span> String<span style="color:#333">[]</span> urlPatterns<span style="color:#333">;</span>
	
<span style="display:block;width:100%;background-color:#e5e5e5">	<span style="color:#555;font-weight:bold">@Value</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;${app.api.logging.requestIdParamName:requestId}&#34;</span><span style="color:#333">)</span>
</span>	<span style="color:#080;font-weight:bold">private</span> String requestIdParamName<span style="color:#333">;</span>
	
	<span style="color:#555;font-weight:bold">@Bean</span>
	<span style="color:#080;font-weight:bold">public</span> FilterRegistrationBean<span style="color:#333">&lt;</span>ApiLoggingFilter<span style="color:#333">&gt;</span> <span style="color:#06b;font-weight:bold">loggingFilter</span><span style="color:#333">()</span> <span style="color:#333">{</span>
	   FilterRegistrationBean<span style="color:#333">&lt;</span>ApiLoggingFilter<span style="color:#333">&gt;</span> registrationBean <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> FilterRegistrationBean<span style="color:#333">&lt;&gt;();</span>
	   registrationBean<span style="color:#333">.</span><span style="color:#00c">setFilter</span><span style="color:#333">(</span><span style="color:#080;font-weight:bold">new</span> ApiLoggingFilter<span style="color:#333">(</span>requestIdParamName<span style="color:#333">));</span>
	   registrationBean<span style="color:#333">.</span><span style="color:#00c">addUrlPatterns</span><span style="color:#333">(</span>urlPatterns<span style="color:#333">);</span>
	   <span style="color:#080;font-weight:bold">return</span> registrationBean<span style="color:#333">;</span>
	<span style="color:#333">}</span>
<span style="color:#333">}</span>
</code></pre></div><p>Now we will create <code>ApiLoggingFilter</code> which is nothing but a Servlet Filter. This filter intercepts all api request and response and log them. It also make use of slf4j MDC to print requestId across all the logs serve that request. <code>ApiLoggingFilter</code> class is long. you can expand below to see code.</p>
<details>
  <summary>Click to expand <code>ApiLoggingFilter</code></summary>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.BufferedReader</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.ByteArrayInputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.ByteArrayOutputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.IOException</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.InputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.InputStreamReader</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.OutputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.io.PrintWriter</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.Collection</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.Enumeration</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.HashMap</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.Locale</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.Map</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">java.util.UUID</span><span style="color:#333">;</span>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.Filter</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.FilterChain</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ReadListener</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ServletException</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ServletInputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ServletOutputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ServletRequest</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.ServletResponse</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.WriteListener</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.http.Cookie</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.http.HttpServletRequest</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.http.HttpServletRequestWrapper</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.servlet.http.HttpServletResponse</span><span style="color:#333">;</span>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.apache.commons.io.output.TeeOutputStream</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.slf4j.Logger</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.slf4j.LoggerFactory</span><span style="color:#333">;</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.slf4j.MDC</span><span style="color:#333">;</span>

<span style="color:#080;font-weight:bold">public</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">ApiLoggingFilter</span> <span style="color:#080;font-weight:bold">implements</span> Filter <span style="color:#333">{</span>

	<span style="color:#080;font-weight:bold">private</span> <span style="color:#080;font-weight:bold">static</span> <span style="color:#080;font-weight:bold">final</span> Logger LOGGER <span style="color:#333">=</span> LoggerFactory<span style="color:#333">.</span><span style="color:#00c">getLogger</span><span style="color:#333">(</span>ApiLoggingFilter<span style="color:#333">.</span><span style="color:#00c">class</span><span style="color:#333">);</span>
	<span style="color:#080;font-weight:bold">private</span> String requestIdParamName<span style="color:#333">;</span>

	ApiLoggingFilter<span style="color:#333">(</span>String requestIdParamName<span style="color:#333">)</span> <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">requestIdParamName</span> <span style="color:#333">=</span> requestIdParamName<span style="color:#333">;</span>
	<span style="color:#333">}</span>

	<span style="color:#555;font-weight:bold">@Override</span>
	<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">doFilter</span><span style="color:#333">(</span>ServletRequest request<span style="color:#333">,</span> ServletResponse response<span style="color:#333">,</span> FilterChain chain<span style="color:#333">)</span>
			<span style="color:#080;font-weight:bold">throws</span> IOException<span style="color:#333">,</span> ServletException <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">try</span> <span style="color:#333">{</span>
			HttpServletRequest httpServletRequest <span style="color:#333">=</span> <span style="color:#333">(</span>HttpServletRequest<span style="color:#333">)</span> request<span style="color:#333">;</span>
			HttpServletResponse httpServletResponse <span style="color:#333">=</span> <span style="color:#333">(</span>HttpServletResponse<span style="color:#333">)</span> response<span style="color:#333">;</span>

			Map<span style="color:#333">&lt;</span>String<span style="color:#333">,</span> String<span style="color:#333">&gt;</span> requestMap <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">getTypesafeRequestMap</span><span style="color:#333">(</span>httpServletRequest<span style="color:#333">);</span>
			BufferedRequestWrapper bufferedRequest <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> BufferedRequestWrapper<span style="color:#333">(</span>httpServletRequest<span style="color:#333">);</span>
			BufferedResponseWrapper bufferedResponse <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> BufferedResponseWrapper<span style="color:#333">(</span>httpServletResponse<span style="color:#333">);</span>
			String requestId <span style="color:#333">=</span> requestMap<span style="color:#333">.</span><span style="color:#00c">containsKey</span><span style="color:#333">(</span>requestIdParamName<span style="color:#333">)</span> <span style="color:#333">?</span> requestMap<span style="color:#333">.</span><span style="color:#00c">get</span><span style="color:#333">(</span>requestIdParamName<span style="color:#333">)</span>
					<span style="color:#333">:</span> UUID<span style="color:#333">.</span><span style="color:#00c">randomUUID</span><span style="color:#333">().</span><span style="color:#00c">toString</span><span style="color:#333">();</span>
			MDC<span style="color:#333">.</span><span style="color:#00c">put</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;REQUEST_ID&#34;</span><span style="color:#333">,</span> requestId<span style="color:#333">);</span>
			<span style="color:#080;font-weight:bold">final</span> StringBuilder logRequest <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> StringBuilder<span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;HTTP &#34;</span><span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span>httpServletRequest<span style="color:#333">.</span><span style="color:#00c">getMethod</span><span style="color:#333">())</span>
					<span style="color:#333">.</span><span style="color:#00c">append</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34; \&#34;&#34;</span><span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span>httpServletRequest<span style="color:#333">.</span><span style="color:#00c">getServletPath</span><span style="color:#333">()).</span><span style="color:#00c">append</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;\&#34; &#34;</span><span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;, parameters=&#34;</span><span style="color:#333">)</span>
					<span style="color:#333">.</span><span style="color:#00c">append</span><span style="color:#333">(</span>requestMap<span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;, body=&#34;</span><span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span>bufferedRequest<span style="color:#333">.</span><span style="color:#00c">getRequestBody</span><span style="color:#333">())</span>
					<span style="color:#333">.</span><span style="color:#00c">append</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;, remote_address=&#34;</span><span style="color:#333">).</span><span style="color:#00c">append</span><span style="color:#333">(</span>httpServletRequest<span style="color:#333">.</span><span style="color:#00c">getRemoteAddr</span><span style="color:#333">());</span>
			LOGGER<span style="color:#333">.</span><span style="color:#00c">info</span><span style="color:#333">(</span>logRequest<span style="color:#333">.</span><span style="color:#00c">toString</span><span style="color:#333">());</span>
			<span style="color:#080;font-weight:bold">try</span> <span style="color:#333">{</span>
				chain<span style="color:#333">.</span><span style="color:#00c">doFilter</span><span style="color:#333">(</span>bufferedRequest<span style="color:#333">,</span> bufferedResponse<span style="color:#333">);</span>
			<span style="color:#333">}</span> <span style="color:#080;font-weight:bold">finally</span> <span style="color:#333">{</span>
				<span style="color:#080;font-weight:bold">final</span> StringBuilder logResponse <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> StringBuilder<span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;HTTP RESPONSE &#34;</span><span style="color:#333">)</span>
						<span style="color:#333">.</span><span style="color:#00c">append</span><span style="color:#333">(</span>bufferedResponse<span style="color:#333">.</span><span style="color:#00c">getContent</span><span style="color:#333">());</span>
				LOGGER<span style="color:#333">.</span><span style="color:#00c">info</span><span style="color:#333">(</span>logResponse<span style="color:#333">.</span><span style="color:#00c">toString</span><span style="color:#333">());</span>
				MDC<span style="color:#333">.</span><span style="color:#00c">clear</span><span style="color:#333">();</span>
			<span style="color:#333">}</span>
		<span style="color:#333">}</span> <span style="color:#080;font-weight:bold">catch</span> <span style="color:#333">(</span>Throwable a<span style="color:#333">)</span> <span style="color:#333">{</span>
			LOGGER<span style="color:#333">.</span><span style="color:#00c">error</span><span style="color:#333">(</span>a<span style="color:#333">.</span><span style="color:#00c">getMessage</span><span style="color:#333">());</span>
		<span style="color:#333">}</span>
	<span style="color:#333">}</span>

	<span style="color:#080;font-weight:bold">private</span> Map<span style="color:#333">&lt;</span>String<span style="color:#333">,</span> String<span style="color:#333">&gt;</span> <span style="color:#06b;font-weight:bold">getTypesafeRequestMap</span><span style="color:#333">(</span>HttpServletRequest request<span style="color:#333">)</span> <span style="color:#333">{</span>
		Map<span style="color:#333">&lt;</span>String<span style="color:#333">,</span> String<span style="color:#333">&gt;</span> typesafeRequestMap <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> HashMap<span style="color:#333">&lt;</span>String<span style="color:#333">,</span> String<span style="color:#333">&gt;();</span>
		Enumeration<span style="color:#333">&lt;?&gt;</span> requestParamNames <span style="color:#333">=</span> request<span style="color:#333">.</span><span style="color:#00c">getParameterNames</span><span style="color:#333">();</span>
		<span style="color:#080;font-weight:bold">while</span> <span style="color:#333">(</span>requestParamNames<span style="color:#333">.</span><span style="color:#00c">hasMoreElements</span><span style="color:#333">())</span> <span style="color:#333">{</span>
			String requestParamName <span style="color:#333">=</span> <span style="color:#333">(</span>String<span style="color:#333">)</span> requestParamNames<span style="color:#333">.</span><span style="color:#00c">nextElement</span><span style="color:#333">();</span>
			String requestParamValue<span style="color:#333">;</span>
			<span style="color:#080;font-weight:bold">if</span> <span style="color:#333">(</span>requestParamName<span style="color:#333">.</span><span style="color:#00c">equalsIgnoreCase</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;password&#34;</span><span style="color:#333">))</span> <span style="color:#333">{</span>
				requestParamValue <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;********&#34;</span><span style="color:#333">;</span>
			<span style="color:#333">}</span> <span style="color:#080;font-weight:bold">else</span> <span style="color:#333">{</span>
				requestParamValue <span style="color:#333">=</span> request<span style="color:#333">.</span><span style="color:#00c">getParameter</span><span style="color:#333">(</span>requestParamName<span style="color:#333">);</span>
			<span style="color:#333">}</span>
			typesafeRequestMap<span style="color:#333">.</span><span style="color:#00c">put</span><span style="color:#333">(</span>requestParamName<span style="color:#333">,</span> requestParamValue<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">return</span> typesafeRequestMap<span style="color:#333">;</span>
	<span style="color:#333">}</span>

	<span style="color:#080;font-weight:bold">private</span> <span style="color:#080;font-weight:bold">static</span> <span style="color:#080;font-weight:bold">final</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">BufferedRequestWrapper</span> <span style="color:#080;font-weight:bold">extends</span> HttpServletRequestWrapper <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">private</span> ByteArrayInputStream bais <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">private</span> ByteArrayOutputStream baos <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">private</span> BufferedServletInputStream bsis <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">byte</span><span style="color:#333">[]</span> buffer <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#06b;font-weight:bold">BufferedRequestWrapper</span><span style="color:#333">(</span>HttpServletRequest req<span style="color:#333">)</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">super</span><span style="color:#333">(</span>req<span style="color:#333">);</span>
			<span style="color:#888">// Read InputStream and store its content in a buffer.
</span><span style="color:#888"></span>			InputStream is <span style="color:#333">=</span> req<span style="color:#333">.</span><span style="color:#00c">getInputStream</span><span style="color:#333">();</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">baos</span> <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> ByteArrayOutputStream<span style="color:#333">();</span>
			<span style="color:#339;font-weight:bold">byte</span> buf<span style="color:#333">[]</span> <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> <span style="color:#339;font-weight:bold">byte</span><span style="color:#333">[</span>1024<span style="color:#333">];</span>
			<span style="color:#339;font-weight:bold">int</span> read<span style="color:#333">;</span>
			<span style="color:#080;font-weight:bold">while</span> <span style="color:#333">((</span>read <span style="color:#333">=</span> is<span style="color:#333">.</span><span style="color:#00c">read</span><span style="color:#333">(</span>buf<span style="color:#333">))</span> <span style="color:#333">&gt;</span> 0<span style="color:#333">)</span> <span style="color:#333">{</span>
				<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">baos</span><span style="color:#333">.</span><span style="color:#00c">write</span><span style="color:#333">(</span>buf<span style="color:#333">,</span> 0<span style="color:#333">,</span> read<span style="color:#333">);</span>
			<span style="color:#333">}</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">buffer</span> <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">baos</span><span style="color:#333">.</span><span style="color:#00c">toByteArray</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>

		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> ServletInputStream <span style="color:#06b;font-weight:bold">getInputStream</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span> <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> ByteArrayInputStream<span style="color:#333">(</span><span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">buffer</span><span style="color:#333">);</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bsis</span> <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> BufferedServletInputStream<span style="color:#333">(</span><span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span><span style="color:#333">);</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bsis</span><span style="color:#333">;</span>
		<span style="color:#333">}</span>

		String <span style="color:#06b;font-weight:bold">getRequestBody</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			BufferedReader reader <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> BufferedReader<span style="color:#333">(</span><span style="color:#080;font-weight:bold">new</span> InputStreamReader<span style="color:#333">(</span><span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">getInputStream</span><span style="color:#333">()));</span>
			String line <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">;</span>
			StringBuilder inputBuffer <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> StringBuilder<span style="color:#333">();</span>
			<span style="color:#080;font-weight:bold">do</span> <span style="color:#333">{</span>
				line <span style="color:#333">=</span> reader<span style="color:#333">.</span><span style="color:#00c">readLine</span><span style="color:#333">();</span>
				<span style="color:#080;font-weight:bold">if</span> <span style="color:#333">(</span><span style="color:#080;font-weight:bold">null</span> <span style="color:#333">!=</span> line<span style="color:#333">)</span> <span style="color:#333">{</span>
					inputBuffer<span style="color:#333">.</span><span style="color:#00c">append</span><span style="color:#333">(</span>line<span style="color:#333">.</span><span style="color:#00c">trim</span><span style="color:#333">());</span>
				<span style="color:#333">}</span>
			<span style="color:#333">}</span> <span style="color:#080;font-weight:bold">while</span> <span style="color:#333">(</span>line <span style="color:#333">!=</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">);</span>
			reader<span style="color:#333">.</span><span style="color:#00c">close</span><span style="color:#333">();</span>
			<span style="color:#080;font-weight:bold">return</span> inputBuffer<span style="color:#333">.</span><span style="color:#00c">toString</span><span style="color:#333">().</span><span style="color:#00c">trim</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
	<span style="color:#333">}</span>

	<span style="color:#080;font-weight:bold">private</span> <span style="color:#080;font-weight:bold">static</span> <span style="color:#080;font-weight:bold">final</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">BufferedServletInputStream</span> <span style="color:#080;font-weight:bold">extends</span> ServletInputStream <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">private</span> ByteArrayInputStream bais<span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#06b;font-weight:bold">BufferedServletInputStream</span><span style="color:#333">(</span>ByteArrayInputStream bais<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span> <span style="color:#333">=</span> bais<span style="color:#333">;</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">available</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span><span style="color:#333">.</span><span style="color:#00c">available</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">read</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span><span style="color:#333">.</span><span style="color:#00c">read</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">read</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">byte</span><span style="color:#333">[]</span> buf<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">int</span> off<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">int</span> len<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">bais</span><span style="color:#333">.</span><span style="color:#00c">read</span><span style="color:#333">(</span>buf<span style="color:#333">,</span> off<span style="color:#333">,</span> len<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> <span style="color:#06b;font-weight:bold">isFinished</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">false</span><span style="color:#333">;</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> <span style="color:#06b;font-weight:bold">isReady</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">true</span><span style="color:#333">;</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setReadListener</span><span style="color:#333">(</span>ReadListener readListener<span style="color:#333">)</span> <span style="color:#333">{</span>

		<span style="color:#333">}</span>
	<span style="color:#333">}</span>

	<span style="color:#080;font-weight:bold">public</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">TeeServletOutputStream</span> <span style="color:#080;font-weight:bold">extends</span> ServletOutputStream <span style="color:#333">{</span>
		<span style="color:#080;font-weight:bold">private</span> <span style="color:#080;font-weight:bold">final</span> TeeOutputStream targetStream<span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#06b;font-weight:bold">TeeServletOutputStream</span><span style="color:#333">(</span>OutputStream one<span style="color:#333">,</span> OutputStream two<span style="color:#333">)</span> <span style="color:#333">{</span>
			targetStream <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> TeeOutputStream<span style="color:#333">(</span>one<span style="color:#333">,</span> two<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">write</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> arg0<span style="color:#333">)</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">targetStream</span><span style="color:#333">.</span><span style="color:#00c">write</span><span style="color:#333">(</span>arg0<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">flush</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">super</span><span style="color:#333">.</span><span style="color:#00c">flush</span><span style="color:#333">();</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">targetStream</span><span style="color:#333">.</span><span style="color:#00c">flush</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">close</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">super</span><span style="color:#333">.</span><span style="color:#00c">close</span><span style="color:#333">();</span>
			<span style="color:#080;font-weight:bold">this</span><span style="color:#333">.</span><span style="color:#00c">targetStream</span><span style="color:#333">.</span><span style="color:#00c">close</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> <span style="color:#06b;font-weight:bold">isReady</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">false</span><span style="color:#333">;</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setWriteListener</span><span style="color:#333">(</span>WriteListener writeListener<span style="color:#333">)</span> <span style="color:#333">{</span>

		<span style="color:#333">}</span>
	<span style="color:#333">}</span>

	<span style="color:#080;font-weight:bold">public</span> <span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">BufferedResponseWrapper</span> <span style="color:#080;font-weight:bold">implements</span> HttpServletResponse <span style="color:#333">{</span>
		HttpServletResponse original<span style="color:#333">;</span>
		TeeServletOutputStream tee<span style="color:#333">;</span>
		ByteArrayOutputStream bos<span style="color:#333">;</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#06b;font-weight:bold">BufferedResponseWrapper</span><span style="color:#333">(</span>HttpServletResponse response<span style="color:#333">)</span> <span style="color:#333">{</span>
			original <span style="color:#333">=</span> response<span style="color:#333">;</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">getContent</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> bos<span style="color:#333">.</span><span style="color:#00c">toString</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">public</span> PrintWriter <span style="color:#06b;font-weight:bold">getWriter</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getWriter</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#080;font-weight:bold">public</span> ServletOutputStream <span style="color:#06b;font-weight:bold">getOutputStream</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">if</span> <span style="color:#333">(</span>tee <span style="color:#333">==</span> <span style="color:#080;font-weight:bold">null</span><span style="color:#333">)</span> <span style="color:#333">{</span>
				bos <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> ByteArrayOutputStream<span style="color:#333">();</span>
				tee <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">new</span> TeeServletOutputStream<span style="color:#333">(</span>original<span style="color:#333">.</span><span style="color:#00c">getOutputStream</span><span style="color:#333">(),</span> bos<span style="color:#333">);</span>
			<span style="color:#333">}</span>
			<span style="color:#080;font-weight:bold">return</span> tee<span style="color:#333">;</span>

		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">getCharacterEncoding</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getCharacterEncoding</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">getContentType</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getContentType</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setCharacterEncoding</span><span style="color:#333">(</span>String charset<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setCharacterEncoding</span><span style="color:#333">(</span>charset<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setContentLength</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> len<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setContentLength</span><span style="color:#333">(</span>len<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setContentLengthLong</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">long</span> l<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setContentLengthLong</span><span style="color:#333">(</span>l<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setContentType</span><span style="color:#333">(</span>String type<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setContentType</span><span style="color:#333">(</span>type<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setBufferSize</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> size<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setBufferSize</span><span style="color:#333">(</span>size<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">getBufferSize</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getBufferSize</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">flushBuffer</span><span style="color:#333">()</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			tee<span style="color:#333">.</span><span style="color:#00c">flush</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">resetBuffer</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">resetBuffer</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> <span style="color:#06b;font-weight:bold">isCommitted</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">isCommitted</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">reset</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">reset</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setLocale</span><span style="color:#333">(</span>Locale loc<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setLocale</span><span style="color:#333">(</span>loc<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> Locale <span style="color:#06b;font-weight:bold">getLocale</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getLocale</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">addCookie</span><span style="color:#333">(</span>Cookie cookie<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">addCookie</span><span style="color:#333">(</span>cookie<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> <span style="color:#06b;font-weight:bold">containsHeader</span><span style="color:#333">(</span>String name<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">containsHeader</span><span style="color:#333">(</span>name<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">encodeURL</span><span style="color:#333">(</span>String url<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">encodeURL</span><span style="color:#333">(</span>url<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">encodeRedirectURL</span><span style="color:#333">(</span>String url<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">encodeRedirectURL</span><span style="color:#333">(</span>url<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@SuppressWarnings</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;deprecation&#34;</span><span style="color:#333">)</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">encodeUrl</span><span style="color:#333">(</span>String url<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">encodeUrl</span><span style="color:#333">(</span>url<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@SuppressWarnings</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;deprecation&#34;</span><span style="color:#333">)</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">encodeRedirectUrl</span><span style="color:#333">(</span>String url<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">encodeRedirectUrl</span><span style="color:#333">(</span>url<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">sendError</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> sc<span style="color:#333">,</span> String msg<span style="color:#333">)</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">sendError</span><span style="color:#333">(</span>sc<span style="color:#333">,</span> msg<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">sendError</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> sc<span style="color:#333">)</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">sendError</span><span style="color:#333">(</span>sc<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">sendRedirect</span><span style="color:#333">(</span>String location<span style="color:#333">)</span> <span style="color:#080;font-weight:bold">throws</span> IOException <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">sendRedirect</span><span style="color:#333">(</span>location<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setDateHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">long</span> date<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setDateHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> date<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">addDateHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">long</span> date<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">addDateHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> date<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> String value<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> value<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">addHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> String value<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">addHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> value<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setIntHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">int</span> value<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setIntHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> value<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">addIntHeader</span><span style="color:#333">(</span>String name<span style="color:#333">,</span> <span style="color:#339;font-weight:bold">int</span> value<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">addIntHeader</span><span style="color:#333">(</span>name<span style="color:#333">,</span> value<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setStatus</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> sc<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setStatus</span><span style="color:#333">(</span>sc<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@SuppressWarnings</span><span style="color:#333">(</span><span style="background-color:#fff0f0">&#34;deprecation&#34;</span><span style="color:#333">)</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">setStatus</span><span style="color:#333">(</span><span style="color:#339;font-weight:bold">int</span> sc<span style="color:#333">,</span> String sm<span style="color:#333">)</span> <span style="color:#333">{</span>
			original<span style="color:#333">.</span><span style="color:#00c">setStatus</span><span style="color:#333">(</span>sc<span style="color:#333">,</span> sm<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> String <span style="color:#06b;font-weight:bold">getHeader</span><span style="color:#333">(</span>String arg0<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getHeader</span><span style="color:#333">(</span>arg0<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> Collection<span style="color:#333">&lt;</span>String<span style="color:#333">&gt;</span> <span style="color:#06b;font-weight:bold">getHeaderNames</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getHeaderNames</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> Collection<span style="color:#333">&lt;</span>String<span style="color:#333">&gt;</span> <span style="color:#06b;font-weight:bold">getHeaders</span><span style="color:#333">(</span>String arg0<span style="color:#333">)</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getHeaders</span><span style="color:#333">(</span>arg0<span style="color:#333">);</span>
		<span style="color:#333">}</span>
		<span style="color:#555;font-weight:bold">@Override</span>
		<span style="color:#080;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">getStatus</span><span style="color:#333">()</span> <span style="color:#333">{</span>
			<span style="color:#080;font-weight:bold">return</span> original<span style="color:#333">.</span><span style="color:#00c">getStatus</span><span style="color:#333">();</span>
		<span style="color:#333">}</span>
	<span style="color:#333">}</span>
<span style="color:#333">}</span>
</code></pre></div></details>
<p><br /></p>
<h3 id="3-applicationyml">3. application.yml</h3>
<p>Let&rsquo;s setup properties related to <code>ApiLoggingFilterConfig</code> file in <em><strong>.properties</strong></em> or <em><strong>.yml</strong></em> file</p>
<ul>
<li>We have enabled api logger <strong>app.api.logging.enabled=true</strong></li>
<li>We have given comma separated url-patterns for which we want to print all api request and response <strong>app.api.logging.url-patterns=/posts/*,/users/*</strong></li>
<li>We have given requestIdParamName whose value will be printed in api request and response. If parameter is not there then uuid will be generated and printed.</li>
<li>Last but not least, we have changed default logging pattern of spring boot to print REQUEST_ID<br>
Default Spring Boot Logging Pattern is as follows:-
<pre><code>&quot;%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&quot;
</code></pre></li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-application.yml" data-lang="application.yml"><span style="color:#080;font-weight:bold">app</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-weight:bold">api</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">logging</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-weight:bold">enable</span>:<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-weight:bold">url-patterns</span>:<span style="color:#bbb"> </span><span style="background-color:#fff0f0">&#34;/users/*,/posts/*&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-weight:bold">requestIdParamName</span>:<span style="color:#bbb"> </span>reqId<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#080;font-weight:bold">logging</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-weight:bold">level</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">root</span>:<span style="color:#bbb"> </span>INFO<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">com.abc.demo</span>:<span style="color:#bbb"> </span>DEBUG<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-weight:bold">pattern</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">console</span>:<span style="color:#bbb"> </span><span style="background-color:#fff0f0">&#34;%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%8.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %X{REQUEST_ID} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&#34;</span><span style="color:#bbb">
</span></code></pre></div><p><br /></p>
<h3 id="4-logs">4. Logs</h3>
<p>That&rsquo;s it. Let&rsquo;s execute some RESTFul API and look at the logs:-</p>
<h5 id="httplocalhost8080postsreqid1234">http://localhost:8080/posts?reqId=1234</h5>
<pre><code>2020-04-23 21:09:44.107 - INFO 3240 --- ApiLoggingFilter: <mark>1234</mark> HTTP GET &quot;/posts&quot; , parameters={requestId=1234}, body=, remote_address=0:0:0:0:0:0:0:1
2020-04-23 21:09:44.110 - INFO 3240 --- ApiLoggingFilter: <mark>1234</mark> HTTP RESPONSE [{&quot;id&quot;:1,&quot;title&quot;:&quot;Spring Boot&quot;,&quot;body&quot;:&quot;All about Spring boot microservice&quot;},{&quot;id&quot;:2,&quot;title&quot;:&quot;Java&quot;,&quot;body&quot;:&quot;Learn Streams in Java&quot;},{&quot;id&quot;:3,&quot;title&quot;:&quot;JavaScript&quot;,&quot;body&quot;:&quot;Whats new in ES6&quot;}]
</code></pre><h5 id="httplocalhost8080posts">http://localhost:8080/posts</h5>
<p>When <em><strong>reqId</strong></em> is not passed as parameter, default uuid will be printed across all logs</p>
<pre><code>2020-04-23 21:09:44.107 - INFO 3240 --- ApiLoggingFilter: <mark>754be6a6-b00a-4c98-b681-2d0041b4f72c</mark> HTTP GET &quot;/posts&quot; , parameters={requestId=1234}, body=, remote_address=0:0:0:0:0:0:0:1
2020-04-23 21:09:44.110 - INFO 3240 --- ApiLoggingFilter: <mark>754be6a6-b00a-4c98-b681-2d0041b4f72c</mark> HTTP RESPONSE [{&quot;id&quot;:1,&quot;title&quot;:&quot;Spring Boot&quot;,&quot;body&quot;:&quot;All about Spring boot microservice&quot;},{&quot;id&quot;:2,&quot;title&quot;:&quot;Java&quot;,&quot;body&quot;:&quot;Learn Streams in Java&quot;},{&quot;id&quot;:3,&quot;title&quot;:&quot;JavaScript&quot;,&quot;body&quot;:&quot;Whats new in ES6&quot;}]
</code></pre><p><br /></p>
<h3 id="5-summary">5. Summary</h3>
<p>We saw in this post that how we can create custom logger to print API request and response. Also incoming request can have <em><strong>requestId</strong></em> parameter which can be printed across all the logs which serves that request. This parameter can be further passed down in downstream microservices to further print it in the logs. This way a request can be tracked end to end from the logs.</p>
<p>Please find the complete source code of custom logging API on <a href="https://github.com/ashishlahoti/springboot-microservice" target="_blank">github springboot-microservice</a></p>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/spring-boot/" rel="tag">Spring Boot</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/microservice/" rel="tag">Microservice</a></li>
	</ul>
</div>
		</footer>
	</article>
</main>

  
  
  

  <section class="social-share">
    <ul class="share-icons">
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f&amp;text=Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot." target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
          <svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
          <p>Twitter</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
          <svg class="widget-social__link-icon icon icon-facebook" width="24" height="24" viewBox="0 0 352 352"><path d="m0 32v288c0 17.5 14.5 32 32 32h288c17.5 0 32-14.5 32-32v-288c0-17.5-14.5-32-32-32h-288c-17.5 0-32 14.5-32 32zm320 0v288h-83v-108h41.5l6-48h-47.5v-31c0-14 3.5-23.5 23.5-23.5h26v-43.5c-4.4-.6-19.8-1.5-37.5-1.5-36.9 0-62 22.2-62 63.5v36h-42v48h42v108h-155v-288z"/></svg>
          <p>Facebook</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f&amp;source=https%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f&amp;title=Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot.&amp;summary=Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot." target="_blank" rel="noopener" aria-label="Share on LinkedIn" class="share-btn linkedin">
          <svg class="widget-social__link-icon icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0,40v272c0,21.9,18.1,40,40,40h272c21.9,0,40-18.1,40-40V40c0-21.9-18.1-40-40-40H40C18.1,0,0,18.1,0,40z M312,32 c4.6,0,8,3.4,8,8v272c0,4.6-3.4,8-8,8H40c-4.6,0-8-3.4-8-8V40c0-4.6,3.4-8,8-8H312z M59.5,87c0,15.2,12.3,27.5,27.5,27.5 c15.2,0,27.5-12.3,27.5-27.5c0-15.2-12.3-27.5-27.5-27.5C71.8,59.5,59.5,71.8,59.5,87z M187,157h-1v-21h-45v152h47v-75 c0-19.8,3.9-39,28.5-39c24.2,0,24.5,22.4,24.5,40v74h47v-83.5c0-40.9-8.7-72-56.5-72C208.5,132.5,193.3,145.1,187,157z M64,288h47.5 V136H64V288z"/></svg>
            <p>LinkedIn</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="whatsapp://send?text=Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot.%2c%20by%20Coding%20N%20Concepts%0aCustom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot.%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f%0a" target="_blank" class="share-btn whatsapp">
          <svg class="widget-social__link-icon icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg>
          <p>Email</p>
        </a>
      </li>
      

      
      
      <li>
        <a href="mailto:?subject=Coding%20N%20Concepts - Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot..&amp;body=Custom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot.%2c%20by%20Coding%20N%20Concepts%0aCustom%20API%20Request%20%26%20Response%20Logging%20in%20spring%20boot.%0a%0ahttps%3a%2f%2fcodingnconcepts.com%2fspring-boot%2fcustom-api-request-response-logging%2f%0a" target="_blank" class="share-btn email">
          <svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16-256-16h-16-384-16zm347 16-139 92.5-139-92.5zm-148 125.5 9 5.5 9-5.5 167-111.5v210h-352v-210z"/></svg>
          <p>Email</p>
        </a>
      </li>
    </ul>
  </section>
  



<div class="related_post_section">
    <h2 class = "related_post_title">See Also</h2>
    <ul class = "related_post">
        
        <li><a href="/spring-boot/configure-info-and-health-endpoints/">info and health endpoints in spring boot</a></li>
        
        <li><a href="/spring-boot/how-to-configure-swagger/">How to configure swagger in spring boot</a></li>
        
        <li><a href="/top-microservices-interview-questions/">Top Microservices Interview Questions</a></li>
        
        <li><a href="/spring-boot/pretty-print-json-response/">Pretty print JSON response in spring boot</a></li>
        
        <li><a href="/spring-boot/configure-kafka-producer-and-consumer/">Configure Kafka Producer and Consumer in spring boot</a></li>
        
    </ul>
</div>


<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Ashish Lahoti avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Ashish Lahoti</span>
	</div>
	<div class="authorbox__description">
		Ashish Lahoti is a full stack application developer at DBS Bank | Confluent Certified Developer for Apache KAFKA | SCJP Certified
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/spring-boot/configure-info-and-health-endpoints/" rel="prev"><span class="post-nav__caption">&thinsp;Previous</span><p class="post-nav__post-title">info and health endpoints in spring boot</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/spring-boot/configure-embedded-jetty-server/" rel="next"><span class="post-nav__caption">Next&thinsp;</span><p class="post-nav__post-title">Configure embedded Jetty server in spring boot</p></a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codingnconcepts" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 CodingNConcepts.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>